<!DOCTYPE html>
    <head>
        <title>{{ title }}</title>
    </head>
    <body>
        <h1>Hacku</h1>
        <p>Generate the hottest haiku on the block!</p>
        
        <h2>Input</h2>
        <form onsubmit="generate(prompt.value); return false;">
            <label for="category">Select a model type</label>
            <br/>
            <select id="category" name="category">
            {% for i in range(models|length) %}
                <option value="{{ models[i] }}">{{ models[i] }}</option>
            {% endfor %}
            </select>
            <br/>
            <label for="prompt">Enter a prompt</label>
            <br/>
            <input type="text" id="prompt">
            <br/>
            <button type="submit">Enter</button>
        </form>

        <h2>Output</h2>
        <p id="output"></p>

        <script>
            var category = document.getElementById("category");
            var prompt = document.getElementById("prompt");
            var output = document.getElementById("output");
            
            function generate(str) {
                if (str.length == 0) {
                    output.innerHTML = "";
                    return;
                } else {
                    var xmlhttp = new XMLHttpRequest();
                    xmlhttp.onreadystatechange = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            output.innerHTML = this.responseText;
                        }
                    };
                    xmlhttp.open("POST", category + "/" + str, true);
                    xmlhttp.send();
                }
            }
            
            /* // with an EventListener, it would look like this
            prompt.addEventListener("keypress", function(event) {
                if (event.key === "Enter") {
                    generate(prompt.value);
                }
            });
            */
        </script>
    </body>
</html>